services:
- postgresql
language: python
python:
- '2.7'
before_install:
- cd getyourdata
- sudo ./create_dev_db.bash
install:
- pip install -r requirements.txt
- python dev_manage.py migrate
script:
- '[ "${TRAVIS_PULL_REQUEST}" = "false" ] && coverage run dev_manage.py test_all || :'
- '[ "${TRAVIS_PULL_REQUEST}" != "false" ] && coverage run dev_manage.py test || :'
- codeclimate-test-reporter
after_success:
- test $TRAVIS_BRANCH = "master" && export SSHPASS=$DEPLOY_PASS
- test $TRAVIS_BRANCH = "master" && sshpass -e ssh -o stricthostkeychecking=no $DEPLOY_USER@$DEPLOY_HOST
  "cd $DEPLOY_PATH; ./deploy.sh" &> /dev/null
addons:
  apt:
    packages:
    - sshpass
  code_climate:
    repo_token: 42571cb2de5890d0afd0580da602aa5ceef9b7eb2d3bec7fa78f294e57b01d24
  sauce_connect:
    username: "Matoking"
    access_key:
      secure: "KJtL0zSSFJr15dAfuIVYhQt9L0i5iU2j/sxD13gSmNPAvMFWph4snPBFlCdjKBhRGEvmK9cTGqpN74V3b+G1INemg5+m/kfpQJ6S0j6JwAC8Pf2XmPAo0vG8VqUyvekhHUxbIBk2ffVn65MSxCvIyqxwsQt7iDHZQompMnbipAAycA/RuTYQ4X6wkM+qutO7sNhVJ2ldYV+a/vqegwgCCKf87LYEqDy/3JFn2besI6YXDKMdmsXQXEXPqF85YOUbz9DMGd6xHQyQECZKBepl+IwGotdxFC2ceInB7WqokEqfnC9f49i4Z9ZuftcU0Ms/9scrkE8AF8Vm8p4Zdhujj5Mbadqndtx/hbngAayI0zG9l3PABAXlHXGO85FSuTA5KeGYpIhT7eMqoqyd5dbtESHZTatT3ITllK3Bx7bKVWl9Une8IqzAlNzA3lDE9Zdxwfmn970oPvfnSq7QjWpYe/S5Nxe0UuFdnJWsI9b5GeeTIh88eGU2nKJYNzVm9zms7k5SvyByXe9yTXW0iidEgj6YYQB6ItZ9TtyqyAYu14Lgrcgk3JpHar3tn0jAiR/wdmVez2vep35bu87zVqGS8hwRTvZhpHTt48o2+rBFJDjFQmFwqVdotMC48qoFQIP7IETb/jEZo+qLiryaf42tPPYMQ6Zkd1hUvE8Y5DKCQbU="
env:
  global:
  - secure: Z0MZzP8JLezxjxfgJ6aL9uW0+8E5lBZ5zN+PxTqpJOliz/CM0coigvIoI72viX7xTd25BOPndim9nhF28LrDSuMm8VxeIOjgIsqJRkTmVa2tJhHqRTPohD46k4jzkTLBgiw4yncsBpwYYpYx9o3a0V7NpPYBkwu4NrAs/LHEv1UeW2qFNr7EpDKiHJPN4CjUgmyd3dLjky/aFvFqviG97VcZ83pvslwr4qHahV/Y/GwGoWupAqmWIOK3Msf/TSHvb+QY8QjWcES5JZYVU+or6iLk6pZ5e54gZvgIZDb/4WHnZDwvCIInn9CnVfHxuPFamEZJZbrJWZYbL3fM/5o7G6K0iiVH44rQ5eO24J3bt7SbEo6I3pYwL0Z66YxmQaPGPdPjU70Hj9O1yviMrIWf+3jVKzQjzCULNkASpXNVtbwAbRNxaN2u9iJImA21dr6sQfau0MPbsO2zuZGlOPs8dHgFXTMfS3uWqNzTi7/jlIFx/PSwXQqsxe4LEY5lg9qCAE+vIZHFWT4+kb1nA3xsUMrpATC1n9geuu6aMuCfN3LqulcIuAlj2Jj/cZe6ZVy3BK9ssD9y3V0MzvV0A/ESHNhEOJr0Om3xSoytaox6sd02ANu+YUXh18pCIEFyBEK6EAUqTDJE3JywXW1hmBWBp6Bb2N1/A/IzcZiW7tZ9cjc=
  - secure: PR1LwNPUu0Ukqn9QjTQzF88jOYbgM7fChSVw3dWvoYP/Dh8KxZAYMAqklrRlFueXLXnPKWMPUs3e3JluumDYfz+wRB2F2XHPX02YXqJjJ18kPrFxEhKbSNQYVCVywdpSt/ubzxFy/WpE/K8AW1iXe1lUSw4k/VO5RAluRE0mAspkLPY0Ckf9usZbRw7bS0Ls+iAWcIyYgQ918ywu0Wvky+ELE4xugolOuB3Ub9cjAIn1mj5+E8ksKKO22F76KBdWsOoI6BLAt/gC6uUiLYbA4mjjaZj0VbRNf/WoSQDLtYXQnoz9QhFnPIW08T0794FLzIE3qHC7p2WlQq+tBr9IFw4h5tSN8aUbP9cuinvAt43U/dQ5CZjv113LD3O+L73Att86DKsd3JX+lDo1cCP2L2HImK1sE0RQ/79zo5vLxOwMThzEX+O1GOSfu5Q/7k4ChqeHu2Bd89b7adt/Ve5f/KbDSgS1UfjPZHVO4u7nQOt/fbLwPiXj+BfNVscIUYZudWWVpiL9Kr913+IhhLdhW2fy3zKD7tAAFS9lo4E4u1nBNQEGEq6BBsHFmKKTJwvc9ymuEK6W8n91MRy4r6MMfOkUJQ+BXtVEc9cvB6u884NA70od0R8QFLsjWlEzk0aaXopEWUb1QcY1iIQTF/dG1dkUh0ndB0n7aNCHsyBE3mE=
  - secure: UDBytd1XXun4tMHWsAQI3OTQ1KQI46WS7BB65P3UOH6yU+qADq8VzEB7E90Gju2cKtbz+uJSll96+diC2lcDWhS63zqdnns2LdX/CnUbLqoFMRYKq4RsRBNah91SCJKEEJKGUoaXfNZJWhL4bkknoEBrkJHSeh6cLqXf7L56Fgz/TfsaEiyHgD6fVki3SiM/razW7K4XW4f38fglzl8wTA5HlO+hoG1YSSV9cCtKtj4ypnPuAM7bQHi487ueBc9aoZGVdYSdLZZhmgztkzEU0Me8HqAuKyHxpl5VXJvHRkNDJpkM1nkXqD9Y2u7rFS9oMGpgkBJX4dwYoiE5MBEExke7txGAHOisSTxTcOjIJB8dRW88c7prWvqUfySnptuS+iClbk9eQ7WgkRvs6am+W5WGkf/j0eMA4vaqgYqVxmANn9ra6qSDfBUwGDm3rBUhxNICxrJAOmanymdJ8KYltjy6RF1+a8ZT5GB/+/UvGiytK5Y60p1BgJt43rZNLeEzIM2y9S/ZJeLSo4nuxWBFgk40auLF4IBQilEGFHyFbn1MyuhyShyvJ/TfM8zXAvUq6bavNU6E0ThpxtcztM3x565fn4VPZYX2TAnXd7c7LhX6QpV4BB2E4pe9nd5oCgN84IzKio/14RUjTqN+Fcgd6wjxoYJOoM4BDF3D+CV99pg=
  - secure: cgxLopKNGTB23wqADph+8IpiCtjmYs2zrMEt62AmhSyNBkmpxSc2I9BuKRS3aigLuoXxLHP2DThuKm968WKRZppf1OSJxb6j3RMZxdUCM7BNVV+NfjsFWRmsV2x/StGpFg6YhPIL4HCoAmWgBlj3rocZiOGlknk/DQHLjYEvsK+8UiIXQT03yQ5q/D8TtiXUT+nDM3Wh4RirfNgzM2aU2AUxoQOCsv9f7P5UnKYNwN/uluVgNvtji+lOUTLz4yz4u3H/kG0HjaoCIURMV7bKZaXRK5tXouUyvqna5GG1nAIPi6sYAxwUQtHvneQOwXapIsIIUi9wmZaCaJeM65kVcPC6nZGboRGdVvA0XmOeazJWRvzvB6VRdJUBWeXjC0yTZ+vcPZTDpxBLRPqtZfzJ8J1ctfSgWcx9AWisMuMOHxBRUIR9qHyhzfNuTXVARTGZT7D2DG0jg3FYcNiG/mSutqQUn3r4EmD+QgMnXVPHg1KuY+ZF7qRUpZNE54gJBoNJnwhniYnnJs5pT54ziH9p8kuqBAQ1R7Ufs5hN3S6XZ/9orlWEBR1syW6w8NiiXYcIAKKll60GZi/iKdIT1rpEYUCLQKTWVI63DzQlX3A7MOdxqrhy/RxSUklPLHcocYCto9m+gnL8HGjZwoucVuqElbII9RnQKoc3wSG1ik1kTDY=
